# pyLRp grammar
# for the shellfish language

# the next line comes directly from the future ...
# import SyntaxTree

%lexer

\s+ %restart
[a-zA-Z][a-zA-Z]* SYM
[a-zA-Z][a-zA-Z]*: KEY
[\+\-\*\/\\@:,\.]+ BIN

# well the current grammar parser is not very nice, a pyLRp parser for pyLRp grammars,
# which uses only the current, limited command-set would solve the problem.
# probably such beauties will be possible in the self parsed, bootstrapped version:

# nearly full lex-capability
# \" %begin(COMMENT), %restart
# <COMMENT> \" %end, %restart
# <COMMENT> .* %restart

# \"\"\" %begin(MLSTRING), %restart
# <MLSTRING> .* %append, %restart
# <MLSTRING> \"\"\" %collect, MLSTRING

%parser


doc:
   %empty
   doc statement

statment:
    exp
    "^" exp
    exp "." statement
    SYM ":=" exp "." statement

exp:
    SYM
    "(" exp ")"
    exp SYM
    exp BIN exp
    SYM key

key:
    KEY exp key1

key1:
    %empty
    KEY exp key1
